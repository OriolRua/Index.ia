<!DOCTYPE html>
<html lang="ca">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Pàgina Web amb Editor de Text</title>
    <link rel="stylesheet" href="styles.css">
</head>
<body>
    <header class="capcalera">
        <div class="primera-franja">
            <img src="https://identitatcorporativa.gencat.cat/web/.content/Documentacio/descarregues/dpt/BN/Presidencia/gencat_cat_blanc.png" alt="Logotip de la Generalitat de Catalunya" class="logotip">
            <div class="enllacos">
                <a href="#" class="area-privada">Àrea privada</a>
                <a href="#" class="contacte">Ajuda</a>
            </div>
        </div>
        <div class="segona-franja">
            <h1 class="titol-web">Index.IA</h1>
        </div>
        <nav class="tercera-franja">
            <ul class="menu-navegacio">
                <li><a href="#">Inici</a></li>
                <li><a href="#">Espais</a></li>
                <li><a href="#">Processos</a></li>
                <li><a href="#">Documents</a></li>
                <li><a href="#">Contacte</a></li>
            </ul>
        </nav>
    </header>
    
    <main class="cos-principal">
        <section class="col-esquerra">
            <label for="menu-desplegable">Opcions:</label>
            <select name="menu-desplegable" id="menu-desplegable">
                <option value="crear-espai">Crea un espai</option>
                <option value="crear-procediment">Crea un procés</option>
                <option value="editar-espai-procés">Editar un espai/procés</option>
            </select>

            <label for="menu-publicar">Publicar:</label>
            <select name="menu-publicar" id="menu-publicar" onchange="gestionarPublicacio(this.value)">
                <option value="">--Selecciona una opció--</option>
                <option value="base-coneixement">Base de Coneixement</option>
                <option value="cataleg">Catàleg</option>
            </select>

            <label for="menu-exportacio">Exportar:</label>
            <select name="menu-exportacio" id="menu-exportacio" onchange="exportar(this.value)">
                <option value="">--Selecciona una opció--</option>
                <option value="word">Document Word</option>
                <option value="pdf">Document PDF</option>
                <option value="html">Document HTML</option>
            </select>
        </section>
        
        <section class="col-centre">
            <div class="editor-container">
                <div class="barra-eines">
                    <button onclick="document.execCommand('bold')" aria-label="Posa el text en negreta"><strong>Bold</strong></button>
                    <button onclick="document.execCommand('italic')" aria-label="Posa el text en cursiva"><em>Italic</em></button>
                    <button onclick="document.execCommand('underline')" aria-label="Posa el text subratllat"><u>Underline</u></button>
                    <button onclick="document.execCommand('insertUnorderedList')" aria-label="Crea una llista no ordenada">• List</button>
                    <button onclick="document.execCommand('insertOrderedList')" aria-label="Crea una llista ordenada">1. List</button>
                    
                    <label for="colorPicker">Color:</label>
                    <input type="color" id="colorPicker" value="#000000" onchange="canviarColorText(this.value)">
                    
                    <span id="icona-publicacio"></span>
                </div>
                <div id="editor" contenteditable="true" aria-label="Editor de text">
                    <article><p>Escriu el teu document aquí...</p></article>
                </div>
                <button id="guardar" onclick="desarContingut()">Desar com a fitxer</button>
            </div>

            <div class="metadades-container">
                <h3>Metadades</h3>
                <div class="metadades-grid">
                    <div>
                        <label for="nom-document">Nom:</label>
                        <input type="text" id="nom-document" name="nom-document">
                    </div>
                    <div>
                        <label for="tipus-document">Tipus:</label>
                        <input type="text" id="tipus-document" name="tipus-document">
                    </div>
                    <div>
                        <label for="autor-document">Autor:</label>
                        <input type="text" id="autor-document" name="autor-document">
                    </div>
                    <div>
                        <label for="notes-document">Notes:</label>
                        <textarea id="notes-document" name="notes-document" rows="3"></textarea>
                    </div>
                </div>
            </div>
        </section>
        
        <section class="col-dreta">
            <div class="cercador-plantilles">
                <h3>Cerca Plantilles</h3>
                <input type="text" id="cercador" onkeyup="filtrarPlantilles()" placeholder="Cerca plantilles...">
            </div>

            <h3>Plantilles disponibles:</h3>
            <div id="llista-plantilles">
                <div class="banner" onclick="carregarPlantilla('informe')">Plantilla d’Informe</div>
                <div class="banner" onclick="carregarPlantilla('ofici')">Plantilla d'Ofici</div>
                <div class="banner" onclick="carregarPlantilla('resolucio')">Plantilla de Resolució</div>
<div class="banner" onclick="carregarPlantilla('acta')">Plantilla d’Acta d’inspecció</div>
<div class="banner" onclick="carregarPlantilla('requeriment')">Plantilla de Requeriment</div>
<div class="banner" onclick="carregarPlantilla('carta')">Plantilla de Carta</div>

            </div>

            <!-- Requadre de versions de documents -->
            <h3>Versions dels Documents:</h3>
            <div class="versions-container">
                <ul id="llista-versions">
                    <li>Document versió 1</li>
                    <li>Document versió 2</li>
                    <li>Document versió 3</li>
                </ul>
            </div>
        </section>
    </main>

    <script>
        function carregarPlantilla(tipus) {
            let editor = document.getElementById('editor');
            if (tipus === 'informe') {
                editor.innerHTML = '<h2>Plantilla d’Informe</h2><p>Aquesta és una plantilla per a un informe oficial. Afegeix aquí el contingut necessari...</p>';
            } else if (tipus === 'ofici') {
                editor.innerHTML = '<h2>Plantilla d\'Ofici</h2><p>Aquesta és una plantilla per a un ofici oficial. Afegeix aquí el contingut necessari...</p>';
            } else if (tipus === 'resolucio') {
                editor.innerHTML = '<h2>Plantilla de Resolució</h2><p>Aquesta és una plantilla per a una resolució oficial. Afegeix aquí el contingut necessari...</p>';
            }
        }

        function desarContingut() {
            const text = document.getElementById('editor').innerHTML;
            const blob = new Blob([text], { type: 'text/html' });
            const a = document.createElement('a');
            a.href = URL.createObjectURL(blob);
            a.download = 'document.html';
            a.click();
        }

        function canviarColorText(color) {
            document.execCommand('foreColor', false, color);
        }

        function exportar(tipus) {
            let editorContent = document.getElementById('editor').innerHTML;
            if (tipus === 'word') {
                let blob = new Blob([editorContent], { type: 'application/msword' });
                let link = document.createElement('a');
                link.href = URL.createObjectURL(blob);
                link.download = 'document.docx';
                link.click();
            } else if (tipus === 'pdf') {
                alert("Exportar a PDF no està implementat.");
            } else if (tipus === 'html') {
                let blob = new Blob([editorContent], { type: 'text/html' });
                let link = document.createElement('a');
                link.href = URL.createObjectURL(blob);
                link.download = 'document.html';
                link.click();
            }
        }

        function gestionarPublicacio(tipus) {
            let editor = document.getElementById('editor');
            let iconaPublicacio = document.getElementById('icona-publicacio');
            iconaPublicacio.innerHTML = "";

            if (tipus === 'base-coneixement') {
                editor.style.backgroundColor = '#f0f0f0';
                iconaPublicacio.innerHTML = '<span style="background-color: #006400; color: white; padding: 5px; border-radius: 3px;">BdC</span>';
            } else if (tipus === 'cataleg') {
                editor.style.backgroundColor = '';
                iconaPublicacio.innerHTML = '<span style="background-color: #d7ff5b; padding: 5px; border-radius: 3px;">Pendent de validar</span>';
            }
        }

        function filtrarPlantilles() {
            let input = document.getElementById('cercador');
            let filter = input.value.toLowerCase();
            let plantilles = document.getElementById('llista-plantilles').getElementsByClassName('banner');
            
            for (let i = 0; i < plantilles.length; i++) {
                let plantilla = plantilles[i];
                let text = plantilla.textContent || plantilla.innerText;
                if (text.toLowerCase().indexOf(filter) > -1) {
                    plantilla.style.display = "";
                } else {
                    plantilla.style.display = "none";
                }
            }
        }
    </script>
</body>
</html>
